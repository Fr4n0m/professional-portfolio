---
export interface Props {
  info: {
    name: string;
    role: string;
    email: string;
    location: string;
    specialties: string;
    additionalTech: string;
  };
  lang: string;
  contactUrl?: string;
}

const { 
  info, 
  lang, 
  contactUrl = "/contacto" // URL por defecto para la p치gina de contacto
} = Astro.props;
---

<div class={`relative group flex items-center ml-2 ${Astro.props.class || ''}`}>
  <a href={lang === 'es' ? '/' : `/${lang}/`} class='flex items-center rounded-full transition-all duration-300 hover:bg-black/10 dark:hover:bg-gray-700/25 hover:scale-110 active:scale-95 p-1.5 profile-icon-link'>
    <div class='w-5 h-5 rounded-full overflow-hidden hero-profile-img'>
      <img
        src='/assets/images/Fr4n0m Photo.webp'
        alt='Fr4n0m photo'
        class='w-full h-full object-cover'
      />
    </div>
  </a>
  <!-- Tooltip con informaci칩n personal y clic a contacto -->
  <div 
    class='absolute tooltip-container left-0 top-14 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-300 ease-out transform translate-y-2 group-hover:translate-y-0 z-[9999]'
    onclick=`window.location.href='${contactUrl}'`
    style="cursor: pointer;"
  >
    <div class='bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 p-4 min-w-[320px] backdrop-filter backdrop-blur-sm shadow-[0_8px_30px_rgba(0,0,0,0.12)] pt-3'>
      <!-- Imagen grande -->
      <div class='flex items-center space-x-4 mb-3'>
        <div class='w-16 h-16 flex-shrink-0 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 ring-2 ring-primary/20 animate-scale-up'>
          <img
            src='/assets/images/Fr4n0m Photo.webp'
            alt='Fr4n0m photo'
            class='w-full h-full object-cover'
            style='aspect-ratio: 1/1; object-position: center;'
          />
        </div>
        <div>
          <h3 class='font-bold text-lg dark:text-white'>{info.name}</h3>
          <p class='text-sm text-gray-600 dark:text-gray-400'>{info.role}</p>
        </div>
      </div>
      <!-- Informaci칩n adicional -->
      <div class='space-y-2 text-sm'>
        <div class='flex items-center space-x-2'>
          <!-- SF Symbol envelope.fill de Apple -->
          <svg class='w-4 h-4 text-gray-500' viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path 
              d="M18.6,21.5H5.4c-1.6,0-3-1.3-3-3V7.1l8.6,5.3c0.3,0.1,0.6,0.2,0.9,0.2s0.7-0.1,0.9-0.2L21.5,7v11.5C21.5,20.1,20.2,21.5,18.6,21.5z" 
              fill="currentColor"
            />
            <path 
              d="M21.5,5.8v-0.2c0-1.6-1.3-3-3-3H5.4c-1.6,0-3,1.3-3,3v0.3l9.2,5.7c0.1,0.1,0.3,0.1,0.4,0.1s0.3,0,0.4-0.1L21.5,5.8z" 
              fill="currentColor"
            />
          </svg>
          <span class='text-gray-700 dark:text-gray-300'>{info.email}</span>
        </div>
        <div class='flex items-center space-x-2'>
          <!-- SF Symbol mappin.circle.fill de Apple -->
          <svg class='w-4 h-4 text-gray-500' viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path 
              d="M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z M12,17c-0.4,0-0.7-0.3-1-0.6l-2.5-5.7c-0.3-0.7,0-1.5,0.7-1.7c0.2-0.1,0.3-0.1,0.5-0.1h4.6c0.7,0,1.3,0.6,1.3,1.3c0,0.2,0,0.3-0.1,0.5l-2.5,5.7C12.7,16.7,12.4,17,12,17z" 
              fill="currentColor"
            />
            <circle 
              cx="12" 
              cy="10" 
              r="1.5" 
              fill="white"
            />
          </svg>
          <span class='text-gray-700 dark:text-gray-300'>
            {info.location.replace(/^游늸\s*/, '')}
          </span>
        </div>
        <div class='flex items-center space-x-2'>
          <!-- SF Symbol server.rack de Apple -->
          <svg class='w-4 h-4 text-gray-500' viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="4" width="18" height="4" rx="1" fill="currentColor"/>
            <rect x="3" y="10" width="18" height="4" rx="1" fill="currentColor"/>
            <rect x="3" y="16" width="18" height="4" rx="1" fill="currentColor"/>
            <circle cx="6" cy="6" r="0.5" fill="white"/>
            <circle cx="6" cy="12" r="0.5" fill="white"/>
            <circle cx="6" cy="18" r="0.5" fill="white"/>
          </svg>
          <span class='text-gray-700 dark:text-gray-300'>{info.specialties}</span>
        </div>
        <div class='flex items-center space-x-2'>
          <!-- SF Symbol gearshape.2.fill de Apple -->
          <svg class='w-4 h-4 text-gray-500' viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path 
              d="M9.6,22H7.4c-0.7,0-1.2-0.5-1.4-1.1l-0.4-1.5c-0.3-0.1-0.6-0.3-0.9-0.4l-1.4,0.6c-0.6,0.3-1.3,0-1.7-0.6l-1.1-1.9c-0.3-0.6-0.1-1.3,0.4-1.7l1.2-1C2,14,2,13.7,2,13.4s0-0.6,0.1-0.9l-1.2-1c-0.5-0.4-0.7-1.1-0.4-1.7l1-1.9c0.3-0.6,1.1-0.9,1.7-0.6l1.4,0.6c0.3-0.2,0.6-0.3,0.9-0.4l0.4-1.5C6.1,5.5,6.7,5,7.4,5h2.2c0.7,0,1.2,0.5,1.4,1.1l0.4,1.5c0.3,0.1,0.6,0.3,0.9,0.4l1.4-0.6c0.6-0.3,1.3,0,1.7,0.6l1.1,1.9c0.3,0.6,0.1,1.3-0.4,1.7l-1.2,1c0.1,0.3,0.1,0.6,0.1,0.9s0,0.6-0.1,0.9l1.2,1c0.5,0.4,0.7,1.1,0.4,1.7l-1.1,1.9c-0.3,0.6-1.1,0.9-1.7,0.6l-1.4-0.6c-0.3,0.2-0.6,0.3-0.9,0.4l-0.4,1.5C10.9,21.5,10.3,22,9.6,22z" 
              fill="currentColor"
            />
            <path 
              d="M22,8.5c0-0.2,0-0.4-0.1-0.6l0.8-0.7c0.3-0.3,0.4-0.7,0.2-1l-0.6-1.1c-0.2-0.4-0.6-0.5-1-0.4l-0.9,0.4c-0.2-0.1-0.4-0.2-0.6-0.3l-0.3-1c-0.1-0.4-0.5-0.7-0.9-0.7h-1.3c-0.4,0-0.8,0.3-0.9,0.7l-0.3,1c-0.2,0.1-0.4,0.2-0.6,0.3L15,4.8c-0.4-0.2-0.8,0-1,0.4L13.4,6.2c-0.2,0.4-0.1,0.8,0.2,1l0.8,0.7c0,0.2-0.1,0.4-0.1,0.6s0,0.4,0.1,0.6l-0.8,0.7c-0.3,0.3-0.4,0.7-0.2,1l0.6,1.1c0.2,0.4,0.6,0.5,1,0.4l0.9-0.4c0.2,0.1,0.4,0.2,0.6,0.3l0.3,1c0.1,0.4,0.5,0.7,0.9,0.7H19c0.4,0,0.8-0.3,0.9-0.7l0.3-1c0.2-0.1,0.4-0.2,0.6-0.3l0.9,0.4c0.4,0.2,0.8,0,1-0.4l0.6-1.1c0.2-0.4,0.1-0.8-0.2-1L22.1,9.1C22,8.9,22,8.7,22,8.5z" 
              fill="currentColor"
            />
            <circle cx="8.5" cy="13.5" r="2" fill="white"/>
            <circle cx="18.5" cy="8.5" r="1.25" fill="white"/>
          </svg>
          <span class='text-gray-700 dark:text-gray-300'>{info.additionalTech}</span>
        </div>
      </div>
      <!-- Flecha del tooltip -->
      <div class='absolute -top-2 left-3 w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 transform rotate-45'></div>
    </div>
  </div>
</div>

<style>
  @keyframes scale-up {
    0% {
      transform: scale(0.8);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-scale-up {
    animation: scale-up 0.3s ease-out forwards;
  }

  /* Asegurar que el tooltip se muestra sobre otros elementos */
  .group:hover .group-hover\:visible {
    z-index: 50;
  }
  
  /* Estilos espec칤ficos para cuando el tooltip est치 en el header vs en el hero */
  .hero-tooltip .tooltip-container {
    left: 50%;
    top: auto;
    bottom: -260px;
    transform: translateX(-50%) translateY(20px);
  }
  
  .hero-tooltip .group-hover\:translate-y-0 {
    transform: translateX(-50%) translateY(0);
  }
  
  .hero-tooltip .tooltip-container .absolute.-top-2 {
    top: -8px;
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
  }
  
  /* Ocultar el 칤cono de perfil peque침o en el hero */
  .hero-tooltip .hero-profile-img {
    display: none;
  }
  
  /* Animaci칩n avanzada para el icono de perfil en hover (similar a los otros iconos del header) */
  .profile-icon-link:hover .hero-profile-img {
    transform: scale(1.2) rotate(8deg);
    filter: brightness(1.2);
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.25s ease;
  }
  
  /* Estado inicial para el icono */
  .profile-icon-link .hero-profile-img {
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.25s ease;
  }
  
  /* Efecto pulse en active para el bot칩n */
  .profile-icon-link:active .hero-profile-img {
    transform: scale(0.9);
    transition: transform 0.15s ease-out;
  }
</style>