---
import SettingsPanel from './SettingsPanel.astro';
import { languages } from '@i18n/config';

const { lang } = Astro.props;
---

<div class="relative ml-1">
  <button 
    id="desktop-accessibility-toggle" 
    class="appearance-none border-none flex hover:scale-110 active:scale-95 transition-all duration-200 p-2 rounded-lg"
    aria-label='Control Center'
  >
    <span class='sr-only'>Control Center</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="settings-icon text-white dark:text-gray-300">
      <rect x="3" y="4" width="18" height="6" rx="3"></rect>
      <circle cx="16" cy="7" r="2" fill="currentColor"></circle>
      <rect x="3" y="14" width="18" height="6" rx="3"></rect>
      <circle cx="8" cy="17" r="2" fill="currentColor"></circle>
    </svg>
  </button>
  <SettingsPanel lang={lang} languages={languages} />
</div>

<style>
  /* Animación avanzada para el icono de settings */
  #desktop-accessibility-toggle:hover svg {
    transform: scale(1.2) rotate(8deg);
    filter: brightness(1.2);
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.25s ease;
    animation: gear-rotate 1s ease-in-out both;
  }
  
  /* Estado inicial para el icono */
  #desktop-accessibility-toggle svg {
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.25s ease;
  }
  
  /* Efecto pulse en active para el botón */
  #desktop-accessibility-toggle:active svg {
    transform: scale(0.9);
    transition: transform 0.15s ease-out;
  }
  
  @keyframes gear-rotate {
    0% {
      transform: rotate(0deg) scale(1);
    }
    50% {
      transform: rotate(10deg) scale(1.2);
    }
    100% {
      transform: rotate(0deg) scale(1.2);
    }
  }
</style>