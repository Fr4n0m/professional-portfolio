---
import { textsJson } from '@utils/const';

const { lang, languages } = Astro.props;
const translations = textsJson[lang];
const controlCenter = translations.controlCenter;
---

<div
  id="desktop-accessibility-panel"
  class="absolute hidden scale-95 top-10 right-0 p-2 min-w-[20rem] w-80 max-h-[calc(100vh-100px)] overflow-y-auto rounded-lg border border-gray-200 bg-white/95 dark:bg-gray-900/95 dark:border-gray-700/50 shadow-lg backdrop-blur-xl"
>
  <!-- Usuario -->
  <div class="p-4 border-b border-gray-200 dark:border-gray-700">
    <div class="flex items-center gap-3">
      <img
        src="/assets/images/Fr4n0m Photo.webp"
        alt="User photo"
        class="w-12 h-12 rounded-full object-cover"
      />
      <div>
        <p class="font-semibold text-gray-900 dark:text-white">Francisco Jos√© Rodr√≠guez</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Frontend Developer</p>
      </div>
    </div>
  </div>
  <!-- Acciones r√°pidas -->
  <div class="p-4 grid grid-cols-2 gap-3 border-b border-gray-200 dark:border-gray-700">
    <!-- Theme Toggle -->
    <button class="desktop-theme-control-btn p-4 rounded-xl bg-gray-100/70 dark:bg-gray-800/70 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 text-center" data-action="theme">
      <svg class="w-6 h-6 mx-auto mb-2 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
      </svg>
      <span class="text-xs text-gray-700 dark:text-gray-300">{controlCenter.quickActions.theme.label}</span>
    </button>
    <!-- Language Toggle -->
    <button class="desktop-lang-control-btn p-4 rounded-xl bg-gray-100/70 dark:bg-gray-800/70 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 text-center" data-action="language">
      <span class="text-2xl mb-2 block">{languages[lang]?.flag || 'üåê'}</span>
      <span class="text-xs text-gray-700 dark:text-gray-300">{controlCenter.quickActions.language.label}</span>
    </button>
  </div>
  <!-- Accesibilidad -->
  <div class="p-4 space-y-3">
    <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">{controlCenter.accessibility.title}</h3>
    <!-- Font Size -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-700 dark:text-gray-300">{controlCenter.accessibility.fontSize.label}</span>
      <div class="flex items-center gap-2">
        <button class="desktop-font-size-control p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800" data-action="font-decrease">
          <svg class="w-4 h-4 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 12H6"></path>
          </svg>
        </button>
        <span class="desktop-font-size-value text-sm font-medium px-2 text-gray-900 dark:text-gray-100">100%</span>
        <button class="desktop-font-size-control p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800" data-action="font-increase">
          <svg class="w-4 h-4 text-gray-700 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m6-6H6"></path>
          </svg>
        </button>
      </div>
    </div>
    <!-- Contrast -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-700 dark:text-gray-300">{controlCenter.accessibility.contrast.label}</span>
      <button class="desktop-contrast-toggle relative w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full transition-colors duration-300" data-action="contrast">
        <span class="absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-300"></span>
      </button>
    </div>
    <!-- Animations -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-700 dark:text-gray-300">{controlCenter.accessibility.animations.label}</span>
      <button class="desktop-animations-toggle relative w-11 h-6 bg-blue-500 rounded-full transition-colors duration-300" data-action="animations" data-enabled="true">
        <span class="absolute right-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-300"></span>
      </button>
    </div>
  </div>
  <!-- Configuraci√≥n avanzada -->
  <div class="p-4 border-t border-gray-200 dark:border-gray-700">
    <a href="/settings" class="w-full text-left p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 block">
      <span class="text-sm text-gray-700 dark:text-gray-300">{controlCenter.settings.advanced}</span>
    </a>
  </div>
</div>

<style>
  #desktop-accessibility-panel {
    transition: all 0.2s ease;
    transform-origin: top right;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08), 
                0 4px 10px rgba(0, 0, 0, 0.05);
  }
  
  #desktop-accessibility-panel.open {
    display: block !important;
    animation: scale-up-center 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) both;
  }
  
  @keyframes scale-up-center {
    from {
      transform: scale(0.95) translateY(-5px);
      opacity: 0;
    }
    to {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
  }
  
  /* Estilos del scrollbar */
  #desktop-accessibility-panel::-webkit-scrollbar {
    width: 6px;
  }
  
  #desktop-accessibility-panel::-webkit-scrollbar-track {
    background: transparent;
  }
  
  #desktop-accessibility-panel::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.3);
    border-radius: 3px;
  }
  
  #desktop-accessibility-panel::-webkit-scrollbar-thumb:hover {
    background: rgba(128, 128, 128, 0.5);
  }
  
  /* Estilo para el panel de accesibilidad */
  .translate-x-5 {
    transform: translateX(1.25rem) !important;
  }
</style>