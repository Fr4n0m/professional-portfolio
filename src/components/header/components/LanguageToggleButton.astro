---
import { languages } from '@i18n/config';
import LanguageMenu from './LanguageMenu.astro';

export interface Props {
  lang: string;
}

const { lang } = Astro.props;
---

<div class='relative'>
  <button
    id='language-toggle-btn'
    class='appearance-none border-none flex hover:scale-110 active:scale-95 transition-all duration-200 p-1 ml-0.5 rounded-lg'
    aria-label='Cambiar idioma'
    type='button'
  >
    <span class='sr-only'>Elige el idioma</span>
    <span class='text-[20px] language-flag text-white'>{languages[lang]?.flag || 'üåê'}</span>
  </button>
  <LanguageMenu lang={lang} languages={languages} />
</div>

<style>
  /* Animaci√≥n avanzada para los iconos en hover */
  #language-toggle-btn:hover .language-flag {
    transform: scale(1.2) rotate(8deg);
    filter: brightness(1.2);
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.25s ease;
  }
  
  /* Estado inicial para los iconos */
  #language-toggle-btn .language-flag {
    transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), filter 0.25s ease;
    line-height: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  /* Efecto pulse en active para los botones del header */
  #language-toggle-btn:active .language-flag {
    transform: scale(0.9);
    transition: transform 0.15s ease-out;
  }
</style>