---
import LinkButton from './LinkButton.astro';
import type { Translations } from '../types/translations';
import { ENTITIES } from '@utils/entities';
import Entity from './Entity.astro';

const translations: Translations = Astro.props.translations;
const CERTIFICATIONS = translations.certificationsPage.certificationsList;
---

<div class='section w-full mx-auto -mt-5 md:-mt-[110px] container lg:w-[740px]'>
	{
		CERTIFICATIONS.map(({ image, title, description, entity, url }) => (
			<>
				<article>
					<h3 class='text-2xl mt-12 font-semibold text-blue-800/85  dark:text-yellow-200/90 mb-3'>
						{title}
					</h3>

					<p class='mb-6 text-gray-500/90 dark:text-white'>
						{description}
					</p>

					<div class='relative group mb-6'>
						<iframe
							src={url}
							width="100%"
							height="600"
							class="rounded-lg shadow-lg border-2 border-gray-200 dark:border-gray-700"
							title={title}
							loading="lazy"
						></iframe>
						
						<div class='absolute top-4 right-4 bg-blue-600 text-white px-3 py-1 rounded-md flex items-center gap-2 opacity-90'>
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
								<polyline points="14 2 14 8 20 8"></polyline>
								<line x1="16" y1="13" x2="8" y2="13"></line>
								<line x1="16" y1="17" x2="8" y2="17"></line>
								<polyline points="10 9 9 9 8 9"></polyline>
							</svg>
							PDF
						</div>
						
						<!-- Enlace de descarga en caso de problemas con el iframe -->
						<div class='absolute bottom-4 left-4'>
							<a 
								href={url} 
								download 
								class='bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1 rounded-md flex items-center gap-2 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors'
							>
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
									<polyline points="7 10 12 15 17 10"></polyline>
									<line x1="12" y1="15" x2="12" y2="3"></line>
								</svg>
								Descargar
							</a>
						</div>
					</div>

					<footer class='flex items-end justify-start mt-6 gap-x-4 mb-16'>
						{entity && ENTITIES[entity] && (
							<Entity {...ENTITIES[entity]} />
						)}
					</footer>
				</article>
			</>
		))
	}
</div>

<style>
	/* Estilos adicionales para mejorar la visualizaci√≥n del PDF en temas oscuros */
	:global(.dark) iframe {
		filter: invert(0.9) hue-rotate(180deg);
		mix-blend-mode: normal;
	}
	
	/* Ajustes responsive para el iframe */
	@media (max-width: 768px) {
		iframe {
			height: 400px;
		}
	}
</style>
