---
import ArrowUp from '@icons/ArrowUp.astro';
import type { Translations } from '@types/translations';
import type { FooterItem } from '@types/footerItem';
import LocationTextFooter from '@components/ui/Map/LocationTextFooter.astro';
import LegalFooter from '@components/legal/LegalFooter.astro';

const translations: Translations = Astro.props.translations;
const footerItems: FooterItem[] = translations.footerItems;

// Configuraci칩n para la ubicaci칩n tal como est치 en el Hero
const currentUrl = Astro.url.pathname;
const isEnglish = currentUrl.includes('/en');
const visibleLocationText = "M치laga, Espa침a";
const visibleLocationTextEN = "Malaga, Spain";
const displayLocationText = isEnglish ? visibleLocationTextEN : visibleLocationText;

// Obtener informaci칩n completa de la ubicaci칩n
const fullLocation = translations.personalInfo.location;
---

<footer class='shadow p-4 py-8 md:p-8 lg:p-10 backdrop-blur-[1px]'>
	<div class='mx-auto max-w-screen-xl text-center'>
		<a
			href='https://www.linkedin.com/in/francisco-jos%C3%A9-r-5b2181bb/'
			class='flex justify-center items-center text-2xl font-semibold text-gray-700 dark:text-white'
			target='_blank'
			rel='noopener noreferrer'
		>
			<img src='/favicon.png' class='rounded-full w-10 h-10 mr-4' />
			{translations.personalInfo.alias}
		</a>
		<div class='my-6 text-gray-500 dark:text-gray-400'>
			{translations.personalInfo.role}
			<div class="inline-flex justify-center mt-2">
				<LocationTextFooter
					text={displayLocationText}
					city="M치laga"
					region="Andaluc칤a"
					address={fullLocation}
					className="text-red-500 dark:text-red-200/95 text-nowrap"
				/>
			</div>
		</div>
		
		<!-- Enlaces de navegaci칩n -->
		<ul
			class='flex flex-wrap gap-y-2 md:gap-y-0 justify-center items-center mb-6 text-gray-700 dark:text-white/80'
		>
			<li>
				<a
					href={footerItems[0].url}
					class='mr-4 hover:underline md:mr-6'
				>
					{footerItems[0].title}
				</a>
			</li>
			<li>
				<a
					href={footerItems[1].url}
					class='mr-4 hover:underline md:mr-6'
				>
					{footerItems[1].title}
				</a>
			</li>
			<li>
				<a
					href={footerItems[2].url}
					class='mr-4 hover:underline md:mr-6'
				>
					{footerItems[2].title}
				</a>
			</li>
			<li>
				<a
					href={footerItems[3].url}
					class='mr-4 hover:underline md:mr-6'
				>
					{footerItems[3].title}
				</a>
			</li>
			<li>
				<a
					href={footerItems[4].url}
					target='_blank'
					rel='noopener noreferrer'
					class='hover:underline md:mr-6 mr-4'
				>
					{footerItems[4].title}
				</a>
			</li>
			<li>
				<a
					href={footerItems[5].url}
					class='hover:underline flex flex-row items-center justify-center group gap-[2px]'
					>{footerItems[5].title}
					<ArrowUp
						class='size-4 group-hover:-translate-y-[1px] transition-all'
					/></a
				>
			</li>
		</ul>
		
		<!-- Enlaces legales -->
		<div class="mt-4 mb-3">
			<LegalFooter />
		</div>
		
		<!-- Copyright -->
		<span class="text-sm text-gray-500 sm:text-center dark:text-gray-400">
			춸 2024{' '}
			<div class="footer-profile-wrapper inline-block relative">
				<a href='#' class="hover:underline text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors duration-200">
					{translations.personalInfo.name}
				</a>
				<div class="footer-tooltip-container">
					<div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 tooltip-content">
						<div class="flex items-center space-x-4 mb-3">
							<div class="w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 flex-shrink-0 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 ring-2 ring-primary/20 animate-scale-up">
								<img
									src='/assets/images/Fr4n0m Photo.webp'
									alt='Fr4n0m photo'
									class="w-full h-full object-cover"
									style="aspect-ratio: 1/1; object-position: center;"
								/>
							</div>
							<div>
								<h3 class="font-bold text-base xs:text-lg dark:text-white">{translations.personalInfo.name}</h3>
								<p class="text-xs xs:text-sm text-gray-600 dark:text-gray-400">{translations.personalInfo.role}</p>
							</div>
						</div>
						<div class="space-y-2 text-xs xs:text-sm">
							<div class="flex items-center space-x-2">
								<span class="text-lg">游닐</span>
								<span class="text-gray-700 dark:text-gray-300 truncate">{translations.personalInfo.mail}</span>
							</div>
							<div class="flex items-center space-x-2">
								<span class="text-lg">游늸</span>
								<span class="text-gray-700 dark:text-gray-300">
									M치laga, Espa침a
								</span>
							</div>
							<div class="flex items-center space-x-2">
								<span class="text-lg">游눹</span>
								<span class="text-gray-700 dark:text-gray-300 specialties-text">React, Next.js, Node.js, Astro, TypeScript</span>
							</div>
							<div class="flex items-center space-x-2">
								<span class="text-lg">丘뙖잺</span>
								<span class="text-gray-700 dark:text-gray-300 tech-text">Tailwind CSS, MongoDB, PostgreSQL, Git</span>
							</div>
						</div>
						<div class="arrow absolute w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 transform rotate-45"></div>
					</div>
				</div>
			</div>
		</span>
	</div>
</footer>

<style>
	/* Aseguramos que el LocationText est칠 correctamente centrado cuando est치 en l칤nea */
	.inline-flex {
		display: inline-flex;
	}
	
	/* Estilos para el tooltip del footer */
	.footer-profile-wrapper {
		cursor: pointer;
		z-index: 10;
	}

	.footer-tooltip-container {
		position: absolute;
		bottom: 100%;
		left: 50%;
		transform: translateX(-50%);
		margin-bottom: 1rem;
		opacity: 0;
		visibility: hidden;
		transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
		z-index: 40;
		pointer-events: none;
		width: min(90vw, 320px);
		transform: translateX(-50%) translateY(5px);
	}
	
	.footer-profile-wrapper:hover .footer-tooltip-container {
		opacity: 1;
		visibility: visible;
		pointer-events: auto;
		transform: translateX(-50%) translateY(0);
	}
	
	/* Contenido del tooltip */
	.tooltip-content {
		width: 100%;
		max-width: 100%;
		min-width: 250px;
		font-size: 0.875rem;
	}
	
	/* Flecha del tooltip */
	.arrow {
		bottom: -0.5rem;
		left: 50%;
		transform: translateX(-50%) rotate(225deg);
	}

	/* Truncar textos largos */
	.specialties-text,
	.tech-text {
		display: inline-block;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		max-width: calc(100% - 2rem);
	}
	
	/* Animaci칩n para la imagen */
	@keyframes scale-up {
		0% {
			transform: scale(0.8);
			opacity: 0;
		}
		100% {
			transform: scale(1);
			opacity: 1;
		}
	}

	.animate-scale-up {
		animation: scale-up 0.3s ease-out forwards;
	}

	/* Adaptaci칩n para m칩viles */
	@media (max-width: 640px) {
		.footer-tooltip-container {
			max-width: 280px;
		}
		
		.tooltip-content {
			padding: 0.75rem;
			font-size: 0.75rem;
		}
		
		.tech-text, .specialties-text {
			max-width: 170px;
		}
	}
</style>
