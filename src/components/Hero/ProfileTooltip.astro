---
// ProfileTooltip.astro - Componente para el tooltip del perfil
interface Props {
  name: string;
  role: string;
  email: string;
  location: string;
  specialties: string;
  additionalTech: string;
  contactUrl?: string;
}

const { 
  name, 
  role, 
  email, 
  location, 
  specialties, 
  additionalTech,
  contactUrl = "/contacto" // URL por defecto para la p√°gina de contacto
} = Astro.props;
---

<div class="hero-tooltip-container tooltip-width-xs tooltip-width-sm tooltip-width-md tooltip-width-lg tooltip-width-xl tooltip-width-2xl tooltip-scroll-landscape" onclick=`window.location.href='${contactUrl}'` style="cursor: pointer;">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4 tooltip-content tooltip-padding-xs tooltip-padding-landscape">
    <div class="flex items-center space-x-4 mb-3">
      <div class="w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 flex-shrink-0 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 ring-2 ring-primary/20 animate-scale-up">
        <img
          src='/assets/images/Fr4n0m Photo.webp'
          alt='Fr4n0m photo'
          class="w-full h-full object-cover"
          style="aspect-ratio: 1/1; object-position: center;"
        />
      </div>
      <div>
        <h3 class="font-bold text-base xs:text-lg dark:text-white text-responsive-xs text-responsive-sm">{name}</h3>
        <p class="text-xs xs:text-sm text-gray-600 dark:text-gray-400 text-responsive-xs text-responsive-sm">{role}</p>
      </div>
    </div>
    <div class="space-y-2 text-xs xs:text-sm tooltip-gap-landscape">
      <div class="flex items-center space-x-2">
        <!-- SF Symbol envelope.fill de Apple -->
        <svg class="w-3 h-3 xs:w-4 xs:h-4 text-gray-500 icon-responsive-xs icon-responsive-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path 
            d="M18.6,21.5H5.4c-1.6,0-3-1.3-3-3V7.1l8.6,5.3c0.3,0.1,0.6,0.2,0.9,0.2s0.7-0.1,0.9-0.2L21.5,7v11.5C21.5,20.1,20.2,21.5,18.6,21.5z" 
            fill="currentColor"
          />
          <path 
            d="M21.5,5.8v-0.2c0-1.6-1.3-3-3-3H5.4c-1.6,0-3,1.3-3,3v0.3l9.2,5.7c0.1,0.1,0.3,0.1,0.4,0.1s0.3,0,0.4-0.1L21.5,5.8z" 
            fill="currentColor"
          />
        </svg>
        <span class="text-gray-700 dark:text-gray-300 truncate text-responsive-xs text-responsive-sm">{email}</span>
      </div>
      <div class="flex items-center space-x-2">
        <!-- SF Symbol mappin.circle.fill de Apple -->
        <svg class="w-3 h-3 xs:w-4 xs:h-4 text-gray-500 icon-responsive-xs icon-responsive-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path 
            d="M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z M12,17c-0.4,0-0.7-0.3-1-0.6l-2.5-5.7c-0.3-0.7,0-1.5,0.7-1.7c0.2-0.1,0.3-0.1,0.5-0.1h4.6c0.7,0,1.3,0.6,1.3,1.3c0,0.2,0,0.3-0.1,0.5l-2.5,5.7C12.7,16.7,12.4,17,12,17z" 
            fill="currentColor"
          />
          <circle 
            cx="12" 
            cy="10" 
            r="1.5" 
            fill="white"
          />
        </svg>
        <span class="text-gray-700 dark:text-gray-300 text-responsive-xs text-responsive-sm">
          {location.replace(/^üìç\s*/, '')}
        </span>
      </div>
      <div class="flex items-center space-x-2">
        <!-- SF Symbol server.rack de Apple -->
        <svg class="w-3 h-3 xs:w-4 xs:h-4 text-gray-500 icon-responsive-xs icon-responsive-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="4" width="18" height="4" rx="1" fill="currentColor"/>
          <rect x="3" y="10" width="18" height="4" rx="1" fill="currentColor"/>
          <rect x="3" y="16" width="18" height="4" rx="1" fill="currentColor"/>
          <circle cx="6" cy="6" r="0.5" fill="white"/>
          <circle cx="6" cy="12" r="0.5" fill="white"/>
          <circle cx="6" cy="18" r="0.5" fill="white"/>
        </svg>
        <span class="text-gray-700 dark:text-gray-300 specialties-text text-responsive-xs text-responsive-sm">{specialties}</span>
      </div>
      <div class="flex items-center space-x-2">
        <!-- SF Symbol gearshape.2.fill de Apple -->
        <svg class="w-3 h-3 xs:w-4 xs:h-4 text-gray-500 icon-responsive-xs icon-responsive-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path 
            d="M9.6,22H7.4c-0.7,0-1.2-0.5-1.4-1.1l-0.4-1.5c-0.3-0.1-0.6-0.3-0.9-0.4l-1.4,0.6c-0.6,0.3-1.3,0-1.7-0.6l-1.1-1.9c-0.3-0.6-0.1-1.3,0.4-1.7l1.2-1C2,14,2,13.7,2,13.4s0-0.6,0.1-0.9l-1.2-1c-0.5-0.4-0.7-1.1-0.4-1.7l1-1.9c0.3-0.6,1.1-0.9,1.7-0.6l1.4,0.6c0.3-0.2,0.6-0.3,0.9-0.4l0.4-1.5C6.1,5.5,6.7,5,7.4,5h2.2c0.7,0,1.2,0.5,1.4,1.1l0.4,1.5c0.3,0.1,0.6,0.3,0.9,0.4l1.4-0.6c0.6-0.3,1.3,0,1.7,0.6l1.1,1.9c0.3,0.6,0.1,1.3-0.4,1.7l-1.2,1c0.1,0.3,0.1,0.6,0.1,0.9s0,0.6-0.1,0.9l1.2,1c0.5,0.4,0.7,1.1,0.4,1.7l-1.1,1.9c-0.3,0.6-1.1,0.9-1.7,0.6l-1.4-0.6c-0.3,0.2-0.6,0.3-0.9,0.4l-0.4,1.5C10.9,21.5,10.3,22,9.6,22z" 
            fill="currentColor"
          />
          <path 
            d="M22,8.5c0-0.2,0-0.4-0.1-0.6l0.8-0.7c0.3-0.3,0.4-0.7,0.2-1l-0.6-1.1c-0.2-0.4-0.6-0.5-1-0.4l-0.9,0.4c-0.2-0.1-0.4-0.2-0.6-0.3l-0.3-1c-0.1-0.4-0.5-0.7-0.9-0.7h-1.3c-0.4,0-0.8,0.3-0.9,0.7l-0.3,1c-0.2,0.1-0.4,0.2-0.6,0.3L15,4.8c-0.4-0.2-0.8,0-1,0.4L13.4,6.2c-0.2,0.4-0.1,0.8,0.2,1l0.8,0.7c0,0.2-0.1,0.4-0.1,0.6s0,0.4,0.1,0.6l-0.8,0.7c-0.3,0.3-0.4,0.7-0.2,1l0.6,1.1c0.2,0.4,0.6,0.5,1,0.4l0.9-0.4c0.2,0.1,0.4,0.2,0.6,0.3l0.3,1c0.1,0.4,0.5,0.7,0.9,0.7H19c0.4,0,0.8-0.3,0.9-0.7l0.3-1c0.2-0.1,0.4-0.2,0.6-0.3l0.9,0.4c0.4,0.2,0.8,0,1-0.4l0.6-1.1c0.2-0.4,0.1-0.8-0.2-1L22.1,9.1C22,8.9,22,8.7,22,8.5z" 
            fill="currentColor"
          />
          <circle cx="8.5" cy="13.5" r="2" fill="white"/>
          <circle cx="18.5" cy="8.5" r="1.25" fill="white"/>
        </svg>
        <span class="text-gray-700 dark:text-gray-300 tech-text text-responsive-xs text-responsive-sm">{additionalTech}</span>
      </div>
    </div>
    <div class="arrow absolute w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 transform rotate-45"></div>
  </div>
</div>

<style>
  /* Estilos base del tooltip sin media queries */
  .hero-tooltip-container {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: 1rem;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    z-index: 40;
    pointer-events: none;
    width: min(90vw, 320px); /* Valor por defecto */
  }
  
  /* Contenido del tooltip */
  .tooltip-content {
    width: 100%;
    max-width: 100%;
    min-width: 250px;
    font-size: 0.875rem; /* 14px */
  }
  
  /* Flecha del tooltip */
  .arrow {
    top: -0.5rem;
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
  }
  
  /* Truncar textos largos */
  .specialties-text,
  .tech-text {
    display: inline-block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: calc(100% - 2rem); /* Restar el espacio del √≠cono */
  }
  
  /* Animaci√≥n y visibilidad */
  :global(.hero-profile-wrapper:hover) .hero-tooltip-container {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }
  
  @keyframes scale-up {
    0% {
      transform: scale(0.8);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-scale-up {
    animation: scale-up 0.3s ease-out forwards;
  }
</style>
